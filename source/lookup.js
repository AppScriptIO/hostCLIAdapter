"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.scriptLookup = scriptLookup;var _path = _interopRequireDefault(require("path"));
var _configurationManagement = require("@dependency/configurationManagement");
var _listDirectoryContent = require("@dependency/listDirectoryContent");
var _util = _interopRequireDefault(require("util"));

async function scriptLookup({
  script,
  projectRootPath,
  scriptKeyToInvoke })
{
  let scriptConfig, scriptFileConfigArray, scriptDirectoryPathArray;
  switch (typeof script) {
    case 'string':
      scriptConfig = { type: 'script', path: script };
      break;
    case 'object':


      scriptFileConfigArray = script.
      filter(scriptObject => scriptObject.type != 'directory');

      for (let index in scriptFileConfigArray) {
        if (scriptFileConfigArray[index].path) {
          scriptFileConfigArray[index].path = (0, _configurationManagement.resolveConfigOptionToAbsolutePath)({ optionPath: scriptFileConfigArray[index].path, rootPath: projectRootPath });
        } else {


        }
      }



      scriptConfig = scriptFileConfigArray.find(scriptObject => scriptObject.key == scriptKeyToInvoke);


      scriptDirectoryPathArray = script.
      filter(scriptObject => scriptObject.type == 'directory').
      reduce((accumulator, currentValue) => {
        accumulator.push(currentValue.path);
        return accumulator;
      }, []);

      for (let index in scriptDirectoryPathArray) {
        scriptDirectoryPathArray[index] = (0, _configurationManagement.resolveConfigOptionToAbsolutePath)({ optionPath: scriptDirectoryPathArray[index], rootPath: projectRootPath });
      }

      if (!scriptKeyToInvoke) {
        console.log("• No command argument passed. Please choose a script:");
        if (script.length > 0) {
          console.log(script);
          let scriptInDirectory = (0, _listDirectoryContent.listContent)({ dir: scriptDirectoryPathArray, recursive: false });
          if (scriptInDirectory) {
            console.log(`\n Or \n`);
            scriptInDirectory;
          }
        } else {console.log(`• There are no script options, the array is empty. Add scripts to the configuration files.`);}
        process.exit(1);
      }

      if (!scriptConfig) {

        let continueLoop = true;
        while (continueLoop && scriptDirectoryPathArray.length > 0) {
          let scriptDirectoryPath = scriptDirectoryPathArray.pop();
          let scriptPath = _path.default.join(scriptDirectoryPath, `${scriptKeyToInvoke}`);

          try {
            require.resolve(scriptPath);

            continueLoop = false;
            scriptConfig = { path: scriptPath };
          } catch (error) {

          }
        }
      }

      break;}


  if (!scriptConfig) {
    let errorMessage = `❌ Reached switch default as scriptKeyToInvoke "${scriptKeyToInvoke}" does not match any option.`;
    let scriptListMessage = `scriptList: \n ${_util.default.inspect(script, { colors: true, compact: false })}`;
    throw new Error(`\x1b[41m${errorMessage}\x1b[0m \n ${scriptListMessage}`);
  }

  return scriptConfig;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZS9sb29rdXAuanMiXSwibmFtZXMiOlsic2NyaXB0TG9va3VwIiwic2NyaXB0IiwicHJvamVjdFJvb3RQYXRoIiwic2NyaXB0S2V5VG9JbnZva2UiLCJzY3JpcHRDb25maWciLCJzY3JpcHRGaWxlQ29uZmlnQXJyYXkiLCJzY3JpcHREaXJlY3RvcnlQYXRoQXJyYXkiLCJ0eXBlIiwicGF0aCIsImZpbHRlciIsInNjcmlwdE9iamVjdCIsImluZGV4Iiwib3B0aW9uUGF0aCIsInJvb3RQYXRoIiwiZmluZCIsImtleSIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiY3VycmVudFZhbHVlIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJzY3JpcHRJbkRpcmVjdG9yeSIsImRpciIsInJlY3Vyc2l2ZSIsInByb2Nlc3MiLCJleGl0IiwiY29udGludWVMb29wIiwic2NyaXB0RGlyZWN0b3J5UGF0aCIsInBvcCIsInNjcmlwdFBhdGgiLCJqb2luIiwicmVxdWlyZSIsInJlc29sdmUiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsInNjcmlwdExpc3RNZXNzYWdlIiwidXRpbCIsImluc3BlY3QiLCJjb2xvcnMiLCJjb21wYWN0IiwiRXJyb3IiXSwibWFwcGluZ3MiOiJvTUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTyxlQUFlQSxZQUFmLENBQTRCO0FBQy9CQyxFQUFBQSxNQUQrQjtBQUUvQkMsRUFBQUEsZUFGK0I7QUFHL0JDLEVBQUFBLGlCQUgrQixFQUE1QjtBQUlKO0FBQ0MsTUFBSUMsWUFBSixFQUFrQkMscUJBQWxCLEVBQXlDQyx3QkFBekM7QUFDQSxVQUFRLE9BQU9MLE1BQWY7QUFDSSxTQUFLLFFBQUw7QUFDSUcsTUFBQUEsWUFBWSxHQUFHLEVBQUVHLElBQUksRUFBRSxRQUFSLEVBQWtCQyxJQUFJLEVBQUVQLE1BQXhCLEVBQWY7QUFDSjtBQUNBLFNBQUssUUFBTDs7O0FBR0lJLE1BQUFBLHFCQUFxQixHQUFHSixNQUFNO0FBQ3pC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Qiw4QkFBdkY7QUFDQSxRQUFJa0MsaUJBQWlCLEdBQUksa0JBQWlCQyxjQUFLQyxPQUFMLENBQWF0QyxNQUFiLEVBQXFCLEVBQUV1QyxNQUFNLEVBQUUsSUFBVixFQUFnQkMsT0FBTyxFQUFFLEtBQXpCLEVBQXJCLENBQXVELEVBQWpHO0FBQ0EsVUFBTSxJQUFJQyxLQUFKLENBQVcsV0FBVU4sWUFBYSxjQUFhQyxpQkFBa0IsRUFBakUsQ0FBTjtBQUNIOztBQUVELFNBQU9qQyxZQUFQO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IHsgcmVzb2x2ZUNvbmZpZ09wdGlvblRvQWJzb2x1dGVQYXRoIH0gZnJvbSAnQGRlcGVuZGVuY3kvY29uZmlndXJhdGlvbk1hbmFnZW1lbnQnXG5pbXBvcnQgeyBsaXN0Q29udGVudCB9IGZyb20gJ0BkZXBlbmRlbmN5L2xpc3REaXJlY3RvcnlDb250ZW50J1xuaW1wb3J0IHV0aWwgZnJvbSAndXRpbCdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNjcmlwdExvb2t1cCh7IFxuICAgIHNjcmlwdCwgIC8vIFsgc3RyaW5nIHwgb2JqZWN0IHwgYXJyYXkgb2Ygb2JqZWN0cyBdIHRoZSBwYXRoIG9mIHNjcmlwdCBkaXJlY3Rvcnkgb3IgYXJyYXkgb2Ygb2JqZWN0cywgd2hlcmUgb2JqZWN0cyBjYW4gcmVwcmVzZW50IGRpcmVjdG9yaWVzIG9yIG1vZHVsZSBwYXRocy5cbiAgICBwcm9qZWN0Um9vdFBhdGgsIFxuICAgIHNjcmlwdEtleVRvSW52b2tlIFxufSkge1xuICAgIGxldCBzY3JpcHRDb25maWcsIHNjcmlwdEZpbGVDb25maWdBcnJheSwgc2NyaXB0RGlyZWN0b3J5UGF0aEFycmF5O1xuICAgIHN3aXRjaCAodHlwZW9mIHNjcmlwdCkge1xuICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgc2NyaXB0Q29uZmlnID0geyB0eXBlOiAnc2NyaXB0JywgcGF0aDogc2NyaXB0IH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ29iamVjdCc6XG5cbiAgICAgICAgICAgIC8vIHNjcmlwdE9iamVjdC50eXBlID09ICdtb2R1bGUnIGZvciBhIHNpbmdsZSBtb2R1bGUgcGF0aFxuICAgICAgICAgICAgc2NyaXB0RmlsZUNvbmZpZ0FycmF5ID0gc2NyaXB0XG4gICAgICAgICAgICAgICAgLmZpbHRlcihzY3JpcHRPYmplY3QgPT4gc2NyaXB0T2JqZWN0LnR5cGUgIT0gJ2RpcmVjdG9yeScpXG4gICAgICAgICAgICAvLyBjaGFuZ2UgcmVsYXRpdmUgcGF0aCB0byBhYnNvbHV0ZVxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gc2NyaXB0RmlsZUNvbmZpZ0FycmF5KSB7XG4gICAgICAgICAgICAgICAgaWYoc2NyaXB0RmlsZUNvbmZpZ0FycmF5W2luZGV4XS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdEZpbGVDb25maWdBcnJheVtpbmRleF0ucGF0aCA9IHJlc29sdmVDb25maWdPcHRpb25Ub0Fic29sdXRlUGF0aCh7IG9wdGlvblBhdGg6IHNjcmlwdEZpbGVDb25maWdBcnJheVtpbmRleF0ucGF0aCwgcm9vdFBhdGg6IHByb2plY3RSb290UGF0aCB9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgZW50cnlwb2ludCBmaWxlIGxvY2F0aW9uIGlmIG5vIHBhdGggb3B0aW9uIHByZXNlbnQgaW4gY29uZmlndXJhdGlvbiBmaWxlLiBUcnkgdG8gZmluZCB0aGUga2V5IG5hbWUgYXMgZmlsZSBuYW1lIGluIGRlZmF1bHQgZW50cnlwb2ludEZvbGRlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2NyaXB0UGF0aCA9IHBhdGguam9pbihgJHtjb25maWdJbnN0YW5jZS5yb290UGF0aH1gLCBgc2NyaXB0YCwgYCR7c2NyaXB0Q29uZmlnLmtleX1gKSAvLyAuanMgZmlsZSBvciBmb2xkZXIgbW9kdWxlLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTG9hZCB0aGUgbW9kdWxlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWUgKGVpdGhlciBhIGZvbGRlciBtb2R1bGUgb3IgZmlsZSB3aXRoIGpzIGV4dGVuc2lvbilcbiAgICAgICAgICAgIC8vIGdldCBzcGVjaWZpYyBlbnRyeXBvaW50IGNvbmZpZ3VyYXRpb24gb3B0aW9uIChlbnRyeXBvaW50LmNvbmZpZ0tleSlcbiAgICAgICAgICAgIHNjcmlwdENvbmZpZyA9IHNjcmlwdEZpbGVDb25maWdBcnJheS5maW5kKHNjcmlwdE9iamVjdCA9PiBzY3JpcHRPYmplY3Qua2V5ID09IHNjcmlwdEtleVRvSW52b2tlKVxuXG4gICAgICAgICAgICAvLyBmbGF0dGVuIHN0cnVjdHVyZSBvZiBhcnJheSBvZiBvYmplY3RzIHRvIGFycmF5IG9mIHN0cmluZ3MvcGF0aHNcbiAgICAgICAgICAgIHNjcmlwdERpcmVjdG9yeVBhdGhBcnJheSA9IHNjcmlwdFxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2NyaXB0T2JqZWN0ID0+IHNjcmlwdE9iamVjdC50eXBlID09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjY3VtdWxhdG9yLCBjdXJyZW50VmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0b3IucHVzaChjdXJyZW50VmFsdWUucGF0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yXG4gICAgICAgICAgICAgICAgfSwgW10pXG4gICAgICAgICAgICAvLyBjaGFuZ2UgcmVsYXRpdmUgcGF0aCB0byBhYnNvbHV0ZVxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gc2NyaXB0RGlyZWN0b3J5UGF0aEFycmF5KSB7XG4gICAgICAgICAgICAgICAgc2NyaXB0RGlyZWN0b3J5UGF0aEFycmF5W2luZGV4XSA9IHJlc29sdmVDb25maWdPcHRpb25Ub0Fic29sdXRlUGF0aCh7IG9wdGlvblBhdGg6IHNjcmlwdERpcmVjdG9yeVBhdGhBcnJheVtpbmRleF0sIHJvb3RQYXRoOiBwcm9qZWN0Um9vdFBhdGggfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIXNjcmlwdEtleVRvSW52b2tlKSB7IC8vIGlmIG5vIGFyZ3VtZW50cyBzdXBwbGllZCwgZmFsbGJhY2sgdG8gZGVmYXVsdCBjb21tYW5kLlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4oCiIE5vIGNvbW1hbmQgYXJndW1lbnQgcGFzc2VkLiBQbGVhc2UgY2hvb3NlIGEgc2NyaXB0OlwiKVxuICAgICAgICAgICAgICAgIGlmKHNjcmlwdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNjcmlwdClcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjcmlwdEluRGlyZWN0b3J5ID0gbGlzdENvbnRlbnQoeyBkaXI6IHNjcmlwdERpcmVjdG9yeVBhdGhBcnJheSwgcmVjdXJzaXZlOiBmYWxzZSB9KVxuICAgICAgICAgICAgICAgICAgICBpZihzY3JpcHRJbkRpcmVjdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFxcbiBPciBcXG5gKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0SW5EaXJlY3RvcnlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IGNvbnNvbGUubG9nKGDigKIgVGhlcmUgYXJlIG5vIHNjcmlwdCBvcHRpb25zLCB0aGUgYXJyYXkgaXMgZW1wdHkuIEFkZCBzY3JpcHRzIHRvIHRoZSBjb25maWd1cmF0aW9uIGZpbGVzLmApIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSlcbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgIGlmKCFzY3JpcHRDb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBzY3JpcHQgaW4gZGlyZWN0b3JpZXMgKGBzY3JpcHRDb25maWcudHlwZSA9PSAnZGlyZWN0b3J5JyBjb25maWd1cmF0aW9uKVxuICAgICAgICAgICAgICAgIGxldCBjb250aW51ZUxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHdoaWxlKGNvbnRpbnVlTG9vcCAmJiBzY3JpcHREaXJlY3RvcnlQYXRoQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2NyaXB0RGlyZWN0b3J5UGF0aCA9IHNjcmlwdERpcmVjdG9yeVBhdGhBcnJheS5wb3AoKVxuICAgICAgICAgICAgICAgICAgICBsZXQgc2NyaXB0UGF0aCA9IHBhdGguam9pbihzY3JpcHREaXJlY3RvcnlQYXRoLCBgJHtzY3JpcHRLZXlUb0ludm9rZX1gKTsgLy8gdGhlIHNwZWNpZmljIG1vZHVsZSB0byBydW4uXG4gICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIG1vZHVsZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lIChlaXRoZXIgYSBmb2xkZXIgbW9kdWxlIG9yIGZpbGUgd2l0aCBqcyBleHRlbnNpb24pXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlLnJlc29sdmUoc2NyaXB0UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2UgcmVzb2x2ZWQgYW5kIGZvdW5kOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVMb29wID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdENvbmZpZyA9IHsgcGF0aDogc2NyaXB0UGF0aCB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBza2lwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuICAgICAgICBcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYoIXNjcmlwdENvbmZpZykge1xuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gYOKdjCBSZWFjaGVkIHN3aXRjaCBkZWZhdWx0IGFzIHNjcmlwdEtleVRvSW52b2tlIFwiJHtzY3JpcHRLZXlUb0ludm9rZX1cIiBkb2VzIG5vdCBtYXRjaCBhbnkgb3B0aW9uLmBcbiAgICAgICAgbGV0IHNjcmlwdExpc3RNZXNzYWdlID0gYHNjcmlwdExpc3Q6IFxcbiAke3V0aWwuaW5zcGVjdChzY3JpcHQsIHsgY29sb3JzOiB0cnVlLCBjb21wYWN0OiBmYWxzZSB9KX1gIC8vIGxvZyBhdmFpbGFibGUgc2NyaXB0cyBcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcXHgxYls0MW0ke2Vycm9yTWVzc2FnZX1cXHgxYlswbSBcXG4gJHtzY3JpcHRMaXN0TWVzc2FnZX1gKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc2NyaXB0Q29uZmlnXG59XG4iXX0=